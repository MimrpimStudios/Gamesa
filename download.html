<!DOCTYPE html>
<html dir="ltr" lang="en" class="focus-outline-visible" lazy-loaded="true">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>Gamesa - Home page</title>
    <!-- Načtení Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <style>
        /* Aplikace gradientu na pozadí celé stránky */
        .full-gradient {
            /* GRADIENT: Z tmavě šedé (dole) do středně tmavé šedé (nahoře) */
            background-image: linear-gradient(0deg, rgba(20, 20, 20, 1) 0%, rgba(60, 60, 60, 1) 100%);
        }

        /* CSS pro centrální blok
           Nastavuje průhlednost, rozostření a definuje přechody pro animaci.
        */
        .content-block {
            /* Efekt rozostření pozadí (Frosted Glass) - ZACHOVÁN pro lištu a hlavní text */
            backdrop-filter: blur(4px); 
            /* Definice animace: plynulý přechod průhlednosti (1s) a pozice (0.8s) */
            transition: opacity 1s ease-out, transform 0.8s ease-out; 
        }

        /* VLASTNÍ CSS PRO ANIMACI:
           Definuje počáteční stav bloku PŘED animací.
           Prvek je neviditelný (opacity: 0) a posunutý 20px dolů.
        */
        .initial-state {
            opacity: 0;
            transform: translateY(20px);
        }
        
        /* Styl pro patičku, aby se přizpůsobila gradientnímu pozadí */
        .footer-style {
             /* Lehce tmavší, částečně průhledné pozadí pro odlišení od body */
        }

        /* CUSTOM CSS PRO ANIMOVANÉ PODTRŽENÍ */
        .animated-underline {
            position: relative;
            /* Změní chování na inline-block, aby podtržení fungovalo i přes zalomení. */
            display: inline-block; 
            /* Důležité: 'currentColor' zajistí, že barva animace je stejná jako barva textu. */
            transition: color 300ms ease-in-out; 
            text-decoration: none;
        }

        .animated-underline::after {
            content: '';
            position: absolute;
            width: 0; 
            height: 2px;
            bottom: -5px; /* Position of the underline below the text */
            left: 0;
            background-color: currentColor; /* Underline color matches text color (inherited color) */
            /* Longer and more visible animation */
            transition: width 600ms ease-out 200ms; 
        }

        .animated-underline:hover::after {
            width: 100%; /* The underline is drawn on hover */
        }
        /* KONEC CUSTOM CSS */
    </style>
</head>
<body class="full-gradient min-h-screen flex flex-col">

    <!-- Navigační lišta: Průhledná (bg-transparent), ale s mírným rozostřením (backdrop-blur-sm) -->
    <header class="w-full bg-transparent p-4 sticky top-0 z-10 backdrop-blur-sm">
        <nav class="max-w-6xl mx-auto flex justify-between items-center">
            <!-- Název stránky/aplikace -->
            <div class="text-2xl font-bold text-white tracking-widest">
                Gamesa
            </div>
            <!-- Navigační odkazy -->
            <div class="flex space-x-6 text-white">
                <a href="index.html" class="animated-underline hover:text-white/80">
                    Home
                </a>
                <a href="#" class="animated-underline hover:text-white">
                    Download
                </a>
            </div>
        </nav>
    </header>
    
    <!-- 
        Hlavní obsah (Main)
        Používá 'flex-grow' pro vyplnění dostupného prostoru a centrování obsahu.
    -->
    <main class="flex-grow flex items-center justify-center p-8">
        <!-- Kontextový blok - centrální prvek s animací. -->
        <div class="max-w-4xl w-full text-white text-center content-block initial-state p-10" id="contentBlock">
            
            <h1 class="text-6xl font-extrabold mb-6 tracking-tight sm:text-7xl">
                Download the game here!
            </h1>
            <div class="w-24 h-1.5 bg-white/70 mx-auto rounded-full mb-8"></div>
            
            <!-- PRVNÍ VĚTA: Centrováno -->
            <p class="text-2xl text-gray-200 sm:text-3xl mb-8">
                Gamesa launcher:
                <a href="https://github.com/mimrpim/Gamesa_launcher/releases/latest" class="animated-underline" id="downloadLinkText">
                    Loading version...
                </a>
            </p>

            <!-- POPIS HRY (ZAROVNÁN VLEVO) -->
        </div>
    </main>

    <!-- 
        ========================================
        FOOTER SECTION
        ========================================
    -->
    <footer class="w-full p-4 text-center text-gray-400 text-sm footer-style">
        <div class="max-w-6xl mx-auto">
            &copy; 2025 
            <a href="https://github.com/mimrpim/" class="animated-underline hover:text-gray-300">
                MimrpimStudios
            </a>. All rights reserved.
        </div>
    </footer>


    <script>
        // Funkce pro načtení nejnovější verze z GitHub API
        async function fetchLatestVersion() {
            const url = 'https://api.github.com/repos/mimrpim/Gamesa_launcher/releases/latest';
            const linkElement = document.getElementById('downloadLinkText');
            // Zde by mělo být volání Gemini API pro získání verze, ale jelikož je to GitHub API, 
            // použijeme přímý fetch a zajistíme exponenciální backoff.
            
            const maxRetries = 5;
            let delay = 1000; // 1 second

            for (let attempt = 0; attempt < maxRetries; attempt++) {
                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        // Přeskočíme standardní chybové stavy
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();
                    const latestTag = data.tag_name || 'unknown version';
                    
                    // Sestavení textu odkazu
                    linkElement.textContent = `click here to download newest version ${latestTag}`;
                    return; // Úspěch
                } catch (error) {
                    console.error(`Attempt ${attempt + 1} failed to fetch GitHub release:`, error);
                    if (attempt < maxRetries - 1) {
                        // Exponenciální backoff
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; 
                    } else {
                        // Po všech neúspěšných pokusech nastavíme chybovou zprávu
                        linkElement.textContent = 'click here to download newest version (version check failed)';
                    }
                }
            }
        }

        // Wait until the entire DOM is loaded and ready
        document.addEventListener('DOMContentLoaded', () => {
            // Find the central block by ID
            const block = document.getElementById('contentBlock');
            
            if (block) {
                // Use a short delay (e.g., 100ms)
                setTimeout(() => {
                    // Start the animation by removing the initial state
                    block.classList.remove('initial-state');
                    
                    // Set the final state
                    block.classList.add('opacity-100', 'translate-y-0'); 
                }, 100);
            }

            // Nové: Načtení nejnovější verze
            fetchLatestVersion();
        });
    </script>
</body>
</html>